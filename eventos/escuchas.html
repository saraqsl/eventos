<!DOCTYPE html>
<html lang="es">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Prueba Escuchas (debug)</title>
</head>
<body>
<h3>Prueba envío escuchas (debug)</h3>

<form id="formEscucha">
  <input name="swl" placeholder="SWL" required><br>
  <input name="correo" placeholder="correo@example.com" type="email" required><br>
  <input name="escuchado" placeholder="estacion" required><br>
  <input name="fecha" type="date" required><br>
  <input name="hora" type="time" required><br>
  <input name="banda" placeholder="40m"><br>
  <input name="modo" placeholder="SSB"><br>
  <button>Enviar</button>
</form>

<pre id="out" style="background:#eee;padding:10px;"></pre>

<script>
const URL_SCRIPT = "https://script.google.com/macros/s/AKfycbw681M1zJqJSSfHRF4kklJUrjlBynFlz7RUhmP_H-63RJidtElqwomoaRX7CWgGxK0Ctg/exec"; // <- pegá la URL del nuevo deployment

document.getElementById('formEscucha').addEventListener('submit', async (ev) => {
  ev.preventDefault();
  const datos = Object.fromEntries(new FormData(ev.target).entries());
  const out = document.getElementById('out');
  out.textContent = "Enviando...\n";

  try {
    const res = await fetch(URL_SCRIPT, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(datos)
    });

    const text = await res.text(); // tomamos el texto crudo
    out.textContent += "HTTP status: " + res.status + " " + res.statusText + "\n\n";
    out.textContent += "Respuesta cruda:\n" + text + "\n\n";

    try {
      const json = JSON.parse(text);
      out.textContent += "JSON.parse OK:\n" + JSON.stringify(json, null, 2);
    } catch (err) {
      out.textContent += "No fue JSON válido: " + err.message;
    }

  } catch (err) {
    out.textContent += "ERROR fetch: " + err.message;
  }
});
</script>
</body>
</html>


