<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Carga de Log ADIF</title>
<style>
  body {
    font-family: "Segoe UI", sans-serif;
    background: #111;
    color: #ddd;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  form {
    background: #1c1c1c;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 10px #000;
    width: 320px;
  }
  h2 {
    text-align: center;
    color: #80ff80;
  }
  label {
    display: block;
    margin-top: 10px;
  }
  input[type="text"],
  input[type="email"],
  input[type="file"] {
    width: 100%;
    margin-top: 5px;
    padding: 6px;
    border: none;
    border-radius: 5px;
  }
  button {
    margin-top: 15px;
    width: 100%;
    padding: 8px;
    background: #28a745;
    border: none;
    color: white;
    border-radius: 6px;
    cursor: pointer;
  }
  button:hover {
    background: #218838;
  }
  #mensaje {
    margin-top: 15px;
    text-align: center;
    color: #80ff80;
  }
</style>
</head>
<body>
  <form id="formAdif">
    <h2>üì° Cargar Log ADIF</h2>

    <label for="licencia">Licencia / Indicativo:</label>
    <input type="text" id="licencia" name="licencia" required placeholder="Ej: LU1ABC" />

    <label for="email">Correo:</label>
    <input type="email" id="email" name="email" required placeholder="ejemplo@gmail.com" />

    <label for="archivo">Archivo .ADI:</label>
    <input type="file" id="archivo" name="archivo" accept=".adi,.adif" required />

    <button type="submit">üì§ Enviar</button>
    <div id="mensaje"></div>
  </form>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbykqpRyxEdJ5Vb7PZlztKWN6ZECyAIUOZJS-lJQDOWxwzoj6HRDiplXpXPequYmG7jXtA/exec";

document.getElementById("formAdif").addEventListener("submit", async (e) => {
  e.preventDefault();

  const licencia = document.getElementById("licencia").value.trim().toUpperCase();
  const email = document.getElementById("email").value.trim();
  const archivo = document.getElementById("archivo").files[0];
  const mensaje = document.getElementById("mensaje");

  if (!archivo) {
    alert("Seleccion√° un archivo ADIF antes de enviar.");
    return;
  }

  mensaje.textContent = "‚è≥ Subiendo archivo...";

  const reader = new FileReader();
  reader.onload = async function(event) {
    const base64 = event.target.result;

    const data = {
      licencia: licencia,
      email: email,
      archivo_base64: base64
    };

    try {
      const response = await fetch(SCRIPT_URL, {
        method: "POST",
        body: new URLSearchParams(data)
      });

      const result = await response.json();

      if (result.success) {
        mensaje.textContent = "‚úÖ Archivo cargado correctamente";
        mensaje.style.color = "#80ff80";
      } else {
        mensaje.textContent = "‚ùå Error: " + result.error;
        mensaje.style.color = "red";
      }
    } catch (err) {
      mensaje.textContent = "‚ö†Ô∏è Error de conexi√≥n: " + err.message;
      mensaje.style.color = "red";
    }
  };

  reader.readAsDataURL(archivo);
});
</script>
</body>
</html>










