<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cargar ADIF ‚Äì Concurso</title>
<style>
body {
  font-family: "Courier New", monospace;
  background: #1e2b1e;
  color: #c8d8c4;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 30px;
}
h1 {
  text-transform: uppercase;
  color: #b0ffb0;
  border-bottom: 2px solid #4a5b3f;
  padding-bottom: 10px;
  margin-bottom: 20px;
}
form {
  background: #263326;
  border: 2px solid #4a5b3f;
  border-radius: 10px;
  padding: 20px;
  width: 100%;
  max-width: 400px;
  box-shadow: inset 0 0 8px rgba(0,0,0,0.5);
}
label {
  display: block;
  margin-top: 10px;
  color: #b7c9a6;
}
input[type="text"], input[type="email"], input[type="file"] {
  width: 100%;
  padding: 8px;
  margin-top: 4px;
  border-radius: 6px;
  border: none;
  background: #303f30;
  color: #fff;
}
button {
  background: #506b50;
  color: white;
  border: none;
  border-radius: 6px;
  padding: 10px 20px;
  margin-top: 20px;
  cursor: pointer;
  text-transform: uppercase;
  transition: background 0.3s;
  width: 100%;
}
button:hover { background: #7fb77f; }
#mensaje { margin-top: 20px; text-align: center; }
</style>
</head>
<body>
<h1>üì° Cargar Log de Concurso</h1>
<form id="form-adif">
  <input type="text" id="licencia" placeholder="Licencia" required>
  <input type="email" id="correo" placeholder="Correo" required>
  <input type="file" id="archivo" accept=".adi" required>
  <button type="submit">Subir</button>
</form>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzsJ1Sk-FxZ8c0RUo6SjaU2-jqiQVmOWaHBKMEfXfIAcWxWorObpS7Kcd2Y5o5lG9TP0A/exec";

document.getElementById("form-adif").addEventListener("submit", async (ev) => {
  ev.preventDefault();
  const licencia = document.getElementById("licencia").value;
  const correo = document.getElementById("correo").value;
  const archivo = document.getElementById("archivo").files[0];

  const reader = new FileReader();
  reader.onload = async () => {
    const base64 = reader.result.split(",")[1];
    const formData = new FormData();
    formData.append("licencia", licencia);
    formData.append("correo", correo);
    formData.append("archivo_base64", base64);

    const res = await fetch(API_URL, { method: "POST", body: formData });
    const json = await res.json();
    alert(json.success ? `‚úÖ Cargado ${json.total} contactos` : `‚ùå Error: ${json.error}`);
  };
  reader.readAsDataURL(archivo);
});
/script>

const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzsJ1Sk-FxZ8c0RUo6SjaU2-jqiQVmOWaHBKMEfXfIAcWxWorObpS7Kcd2Y5o5lG9TP0A/exec"; // la del Apps Script

document.getElementById("formAdif").addEventListener("submit", async (e) => {
  e.preventDefault();
  const licencia = document.getElementById("licencia").value.trim().toUpperCase();
  const email = document.getElementById("email").value.trim();
  const archivo = document.getElementById("archivo").files[0];
  const mensaje = document.getElementById("mensaje");

  if (!archivo) return alert("Seleccion√° un archivo ADIF.");

  const formData = new FormData();
  formData.append("licencia", licencia);
  formData.append("email", email);
  formData.append("archivo", archivo);

  mensaje.textContent = "‚è≥ Enviando...";
  try {
    const res = await fetch(SCRIPT_URL, { method: "POST", body: formData });
    const data = await res.json();
    mensaje.textContent = data.success ? "‚úÖ Archivo cargado correctamente" : "‚ùå Error al cargar";
  } catch {
    mensaje.textContent = "‚ùå Error de conexi√≥n.";
  }
});
</script>
</body>
</html>






