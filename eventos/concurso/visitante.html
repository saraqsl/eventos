<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üì° Registro de Contactos Confirmados</title>
<style>
body {
  font-family: "Courier New", monospace;
  background-color: #0a0a0a;
  color: #0ff;
  text-align: center;
  padding: 20px;
}

h1 {
  color: #00ffff;
  text-shadow: 0 0 10px #00ffff;
}

input, button {
  padding: 8px 12px;
  font-family: inherit;
  font-size: 1rem;
  border-radius: 4px;
  border: 1px solid #00ffff;
  background: #001f1f;
  color: #00ffff;
  margin: 5px;
}

button:hover {
  background: #003333;
  cursor: pointer;
}

#resultados {
  margin-top: 20px;
  text-align: left;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
  background: rgba(0, 30, 30, 0.9);
  border: 1px solid #00ffff;
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0 0 15px #00ffff33;
}

.linea {
  border-bottom: 1px dashed #007777;
  padding: 6px 0;
}

footer {
  margin-top: 30px;
  color: #007777;
  font-size: 0.9rem;
}
</style>
</head>
<body>

<h1>üõ∞Ô∏è REGISTRO DE CONTACTOS CON SU ESTACION CARGADOS POR SUS CORRESPONSALES </h1>

<p>Ingrese su distintivo (SD) para visualizar quien cargo contactos con ust.</p>

<input type="text" id="sdVisitante" placeholder="Ej: LU1ABC" />
<button onclick="buscarContactos()">Buscar</button>

<div id="resultados"></div>

<footer>
BT<br>
Transmisi√≥n finalizada.<br>
AR<br>
</footer>

<script>
// URL p√∫blica de todos.json generado por tu Apps Script
const URL_JSON = "https://script.google.com/macros/s/AKfycbxue9-C31QQzJNPuJ4Ao1pthssBLjy4b15WGy7lunXCNLpGkF-KbAPadp--j5tqldfWRw/exec"; 
// ‚ö†Ô∏è Reemplazar con tu URL publicada del Apps Script (que devuelva todos.json)

async function buscarContactos() {
  const sd = document.getElementById('sdVisitante').value.trim().toUpperCase();
  const contenedor = document.getElementById('resultados');
  contenedor.innerHTML = "‚è≥ Cargando datos...";

  try {
    const resp = await fetch(URL_JSON);
    const datos = await resp.json();

    let encontrados = [];
    for (const [owner, contactos] of Object.entries(datos)) {
      for (const qso of contactos) {
        const call = (qso.call || "").toUpperCase();
        const station = (qso.station_callsign || "").toUpperCase();
        if (call === sd || station === sd) {
          encontrados.push({
            owner,
            call: qso.call || "",
            date: qso.qso_date || "",
            time: qso.time_on || "",
            band: qso.band || "",
            mode: qso.mode || ""
          });
        }
      }
    }

    if (encontrados.length === 0) {
      contenedor.innerHTML = `<p>‚ö†Ô∏è No se encontraron contactos confirmados para <b>${sd}</b>.</p>`;
      return;
    }

    // Mostrar resultados tipo parte naval
    let html = `<p>üìñ Informe de contacto para <b>${sd}</b></p><hr>`;
    encontrados.forEach((q, i) => {
      html += `
        <div class="linea">
          N¬∫ ${i + 1}<br>
          ESTACI√ìN CONTACTADA: ${q.owner}<br>
          LLAMADA: ${q.call}<br>
          FECHA: ${q.date}  HORA: ${q.time}<br>
          BANDA: ${q.band}  MODO: ${q.mode}<br>
          -- FIN DE ENTRADA --
        </div>`;
    });

    html += `<hr><p>BT<br>Fin del mensaje.<br>AR</p>`;
    contenedor.innerHTML = html;

  } catch (err) {
    console.error(err);
    contenedor.innerHTML = `<p>‚ùå Error al cargar datos del servidor.</p>`;
  }
}
</script>
</body>
</html>




















